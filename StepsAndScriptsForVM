## Step 1: Prepare Cloud VM (ubuntu 24 t2.medium)

### Install and Configure

```bash
sudo apt update
##Install Java (Jenkins Needs Java)
sudo apt install -y openjdk-17-jdk
java -version
##Add Jenkins Repository and Key
curl -fsSL https://pkg.jenkins.io/debian-stable/jenkins.io-2023.key | sudo tee \
  /usr/share/keyrings/jenkins-keyring.asc > /dev/null
echo deb [signed-by=/usr/share/keyrings/jenkins-keyring.asc] \
  https://pkg.jenkins.io/debian-stable binary/ | sudo tee \
  /etc/apt/sources.list.d/jenkins.list > /dev/null
sudo apt update
sudo apt install -y jenkins
sudo systemctl enable jenkins
sudo systemctl start jenkins
sudo systemctl status jenkins

```
##Install terraform
```bash
sudo apt-get update
sudo apt-get install -y unzip
wget https://releases.hashicorp.com/terraform/1.9.5/terraform_1.9.5_linux_amd64.zip
sudo unzip terraform_1.9.5_linux_amd64.zip -d /usr/local/bin/
terraform -version
```

Access Jenkins:
 `http://<VM_PUBLIC_IP>:8080`

---

## Step 2: Configure AWS Credentials for Terraform

Terraform will need access to AWS to build infrastructure.

### Use IAM User Access Keys

1. Create an IAM user in AWS (e.g., `jenkins-terraform-user`) with permissions like:

   * `AmazonS3FullAccess`
   * `AmazonDynamoDBFullAccess`
   * `AmazonEKSFullAccess`
   * `AmazonEC2FullAccess`
   * etc. (or use a custom least-privilege policy later)

---

## Step 3: Connect Jenkins with GitHub

### In your GitHub repo:

* Go to **Settings → Webhooks → Add webhook**
* Payload URL → `http://<your_VM_IP>:8080/github-webhook/`
* Content type: `application/json`
* Select: “Just the push event”

### In Jenkins:

* Install the plugin:

  * “GitHub Integration” or “GitHub Plugin”
* Create a new **Pipeline job**

  * Choose: “GitHub hook trigger for GITScm polling”

---

## Step 4: Create the Pipeline Script (`Jenkinsfile.terraform`)

This file will be in GitHub repo's root (Jenkins will read it).


## Step 5: Folder Structure (GitHub Repo)

```
.
├── Jenkinsfile.terraform
└── terraform/
    ├── main.tf
    ├── variables.tf
    ├── outputs.tf
    └── backend.tf
```

---

## Flow Summary

| Step | Action                                             | Tool            |
| ---- | -------------------------------------------------- | --------------- |
| 1    | Developer commits change to `terraform/`           | GitHub          |
| 2    | GitHub webhook notifies Jenkins                    | GitHub Webhook  |
| 3    | Jenkins pulls latest code                          | Git             |
| 4    | Jenkins runs Terraform init, validate, plan, apply | Terraform       |
| 5    | Infrastructure is provisioned/updated              | AWS (EKS, etc.) |

---


